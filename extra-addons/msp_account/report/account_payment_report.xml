<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="msp_account.account_payment_report_header">
        <div class="header">
            <table width="100%" height="30" style="font-size:10px; border-collapse: separate; " cellspacing="0" cellpadding="0">
                <tr>
                    <td>
                        <span t-raw="report.get_printing_format_header(record=payment)"/>
                    </td>
                </tr>
            </table>
        </div>
    </template>

    <template id="msp_account.account_payment_report_page">
        <div class="page">
            <div>
                <span style="font-size:16px;">
                    We received from <span style="font-weight:bold;" t-field="payment.partner_id.name"/> -
                    VAT: <span t-field="payment.partner_id.vat"/>
                    the sum of <span style="font-weight:bold;" t-field="payment.amount"/>
                    for the following values in
                </span>
                <t t-if="payment.journal_id.type == 'bank' ">
                    <span t-field="payment.payment_method_line_id.name"/> - Bank <span t-field="payment.journal_id.bank_account_id.bank_name"/>
                </t>
                <t t-else="">
                    <span t-field="payment.journal_id.name"/>
                </t>
                <span>, for the cancellation/amortization of invoices according to the following list:</span>
            </div>
            <div style="font-size:14px; margin-top:16px;">
                <table style="border-collapse: separate; border:1px solid black; margin:auto;"
                       height="100"
                       width="50%">
                    <thead>
                        <tr>
                            <th style="text-align:center; border-bottom:1px solid black;">Invoice</th>
                            <th style="text-align:center; border-bottom:1px solid black;">Date</th>
                            <th style="text-align:center; border-bottom:1px solid black;">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-if="len(payment.reconciled_invoice_ids) > 0">
                            <t t-foreach="payment.reconciled_invoice_ids" t-as="invoice">
                                <tr>
                                    <td style="text-align:center;">
                                        <span t-field="invoice.name"/>
                                    </td>
                                    <td style="text-align:center;">
                                        <span t-field="invoice.date"/>
                                    </td>
                                    <td style="text-align:right; padding-right:10px;">
                                        <span t-field="invoice.amount_total"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                        <t t-else="">
                            <tr>
                                <td style="text-align:center;">Payment in Advance</td>
                                <td style="text-align:center;"></td>
                                <td style="text-align:right; padding-right:10px;"><span t-field="payment.amount"/></td>
                            </tr>
                        </t>

                    </tbody>
                    <tr>
                        <t t-foreach="3" t-as="idx">
                            <td style="border-right:1px solid gray; border-top:0px solid white; border-bottom:0px solid white; " height="100%">

                            </td>
                        </t>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align:right; font-weight:bold; border-top:1px solid black;">
                            Total
                        </td>
                        <td style="text-align:right; font-weight:bold; border-top:1px solid black; padding-right:10px;">
                            <span t-field="payment.amount"/>
                        </td>
                    </tr>
                </table>
                <div style="margin-top:32px;">
                    <div style="display:inline-block; width:49%; text-align:center;">
                        <strong>
                            <span style="font-size:16px;" t-esc="report.get_printing_format(record=payment).get_label('City')"/>
                            - <span
                                t-field="payment.date"/>
                        </strong>
                    </div>
                    <div style="display:inline-block; width:49%; ">
                        <div style="text-align:center;">
                            <img t-if="payment.get_user_signature()" height="80px"
                                 t-att-src="image_data_uri(payment.get_user_signature())"/>
                        </div>
                        <div style="text-align:center;">
                            ____________________________________
                        </div>
                        <div style="text-align:center;">
                            <span style="font-weight:bold; font-size:16px;"/> Authorized Collector
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </template>


    <template id="msp_account.account_payment_report_footer">
        <div class="footer">
        </div>
    </template>


    <template id="msp_account.account_payment_report">
        <t t-call="web.html_container">
            <t t-call="web.basic_layout">
                <!-- <t t-call="report.external_layout"> -->
                <t t-foreach="docs" t-as="payment">
                    <t t-call="msp_account.account_payment_report_header" t-lang="payment.partner_id.lang"/>
                    <t t-call="msp_account.account_payment_report_page" t-lang="payment.partner_id.lang"/>
                    <t t-call="msp_account.account_payment_report_footer" t-lang="payment.partner_id.lang"/>
                </t>

            </t>
        </t>
    </template>


</odoo>